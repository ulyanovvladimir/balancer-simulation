# Симуляция балансировки нагрузки

Серверы могут обрабатывать запросы. Каждый сервер выполняет запросы последовательно, по очереди поступления.

Для симуляции запросов различной нагрузки, запросы должны иметь вес в условных единицах.

Серверы могут иметь различную производительность. С точки зрения модели, каждый сервер может эффективно обработать определенную 
нагрузку, ее можно измерить в  несколько условных единиц в секунду. Таким образом можно расчитать физическую задержку,
временной интервалл, который конкретный сервер тратит на обработку одного запроса. Данный временной интервалл равен 
```
RequestLoad / ServerPerformance * 1000 ms
```

Сервер не справляется с нагрузкой, если его очередь из запросов по суммарному весу превышает его 
производительность.

Сервер с точки зрения многопоточности должен работать по паттерну Consumer-Producer.
Один поток, который вызывает извне метод Server.process(Request) должен быть продюсером, производителем: добавлять элемент в очередь.
Таких потоков в теории может быть несколько.
Отдельный метод внутри сервера должен быть потребителем. Выбирать из очереди следующий запрос, обрабатывать его.
На время обработки он не должен блокировать очередь, давая возможность посылать новые запросы к серверу и ставить их в очередь при необходимости.

Балансировщик нагрузки представляет собой пул серверов и алгоритм выбора сервера, которому отправляется запрос на выполнение.
При наличии входного запроса, балансировщик выбирает сервер и передает ему запрос на выполнение.

Изначально балансировщик получает пул серверов, запущенных и готовых к работе. Далее все зависит от алгоритма балансировщика.

Симуляция 1. Используем случайный выбор сервера из пула

Симуляция 2. Используем RoundRobin

Симуляция 3. Используем WeightedRoundRobin
  
Симуляция 4. Используем статистику загруженности серверов  


Создать генератор запросов для симуляции нагрузки на систему. Для каждой симуляции создавать / настраивать 
свой генератор запросов таким образом, чтобы демонстрировать превосходство данного балансировщика над предыдущим. 
Например, создать такой генератор, который бы приводил к перегрузке балансировщика методом RoundRobin, но балансировщик 
WeightedRoundRobin справлялся бы. 

Создать конфигурацию на 3+ сервера с значительно отличающейся производительностью.

Сделать runtime-построение графиков загруженности серверов.

Написать отчет о проделанной работе, используя результаты, полученные в симуляции.